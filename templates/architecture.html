<!DOCTYPE html>
<html lang="uk" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ - SpiriWile</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script>
        // –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/static/js/sw.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(err => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ cookies
        function setCookie(name, value, days) {
            let expires = "";
            if (days) {
                const date = new Date();
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                expires = "; expires=" + date.toUTCString();
            }
            document.cookie = name + "=" + value + expires + "; path=/";
        }

        function getCookie(name) {
            const nameEQ = name + "=";
            const ca = document.cookie.split(';');
            for(let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) == ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }

        function getSystemTheme() {
            return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        }

        function setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            if (document.getElementById('theme-toggle')) {
                document.getElementById('theme-toggle').checked = theme === 'dark';
            }
            setCookie('theme', theme, 365);
        }

        const savedTheme = getCookie('theme');
        const systemTheme = getSystemTheme();
        const initialTheme = savedTheme || systemTheme;
        setTheme(initialTheme);

        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
            if (!getCookie('theme')) {
                setTheme(e.matches ? 'dark' : 'light');
            }
        });
    </script>
</head>
<body>
    <div class="loader-wrapper">
        <div class="loader"></div>
    </div>
    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand" href="/">SpiriWile</a>
            <div class="d-flex align-items-center">
                <button id="debug-holiday" class="btn btn-sm btn-outline-primary me-2 d-none" style="font-size: 1.2rem;" title="–ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏ —Å–≤—è—Ç–∫–æ–≤–∏–π —Ä–µ–∂–∏–º">üéâ</button>
                <label class="theme-switch" title="–ó–º—ñ–Ω–∏—Ç–∏ —Ç–µ–º—É">
                    <input type="checkbox" id="theme-toggle">
                    <span class="slider"></span>
                </label>
                <button class="navbar-toggler ms-3" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </div>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/">–ì–æ–ª–æ–≤–Ω–∞</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/rules">–ü—Ä–∞–≤–∏–ª–∞</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="/architecture">–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://send.monobank.ua/jar/6YcXYdsKaR" target="_blank">–ë–∞–Ω–∫–∞</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <section class="architecture-section">
        <div class="container">
            <h1 class="section-title text-center">–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–µ—Ä—É</h1>
            
            <div class="architecture-container">
                <div class="architecture-item">
                    <h2>–û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ üîß</h2>
                    <div class="architecture-diagram">
                        <div class="diagram-item">
                            <h3>–í–µ–±-—Å–µ—Ä–≤–µ—Ä üåê</h3>
                            <ul>
                                <li>Flask (Python) üêç</li>
                                <li>Service Worker üì¶</li>
                                <li>Bootstrap üé®</li>
                            </ul>
                        </div>
                        <div class="diagram-item">
                            <h3>–°–µ—Ä–≤–µ—Ä MC ‚õèÔ∏è</h3>
                            <ul>
                                <li>Java (Purpur) ‚òï</li>
                                <li>Bedrock (Geyser) üì±</li>
                                <li>–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è ‚ö°</li>
                            </ul>
                        </div>
                        <div class="diagram-item">
                            <h3>–ë–µ–∑–ø–µ–∫–∞ üõ°Ô∏è</h3>
                            <ul>
                                <li>DDoS –∑–∞—Ö–∏—Å—Ç üö´</li>
                                <li>–ê–Ω—Ç–∏—á—ñ—Ç üéÆ</li>
                                <li>–ë–µ–∫–∞–ø–∏ üíæ</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="architecture-item">
                    <h2>–¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ ‚öôÔ∏è</h2>
                    <div class="tech-details">
                        <div class="detail-card">
                            <h3>–•–æ—Å—Ç–∏–Ω–≥ üñ•Ô∏è</h3>
                            <p>–°–µ—Ä–≤–µ—Ä –∑ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—î—é –¥–ª—è MC:</p>
                            <ul>
                                <li>SSD 240 GB üí®</li>
                                <li>HDD 1 TB üíø</li>
                                <li>CPU: 4 —è–¥—Ä–∞ üîÑ</li>
                                <li>RAM: 8 GB üéØ</li>
                                <li>DDoS –∑–∞—Ö–∏—Å—Ç üõ°Ô∏è</li>
                            </ul>
                        </div>
                        <div class="detail-card">
                            <h3>–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è ‚ö°</h3>
                            <p>–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ:</p>
                            <ul>
                                <li>Purpur —è–¥—Ä–æ üöÄ</li>
                                <li>Pterodactyl üéõÔ∏è</li>
                                <li>–ö–µ—à—É–≤–∞–Ω–Ω—è üì¶</li>
                                <li>–†–µ–¥—Å—Ç–æ—É–Ω ‚ö°</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="architecture-item">
                    <h2>–ü–ª–∞–≥—ñ–Ω–∏ üîå</h2>
                    <div class="plugins-grid">
                        <div class="plugin-card">
                            <h3>SMP —Ä–µ–∂–∏–º üåç</h3>
                            <p>–ö–ª–∞—Å–∏—á–Ω–µ –≤–∏–∂–∏–≤–∞–Ω–Ω—è –∑ —Ä–æ–∑—à–∏—Ä–µ–Ω–∏–º–∏ –º–æ–∂–ª–∏–≤–æ—Å—Ç—è–º–∏.</p>
                        </div>
                        <div class="plugin-card">
                            <h3>–ö–ª–∞–Ω–∏ ‚öîÔ∏è</h3>
                            <p>–°–∏—Å—Ç–µ–º–∞ –∫–ª–∞–Ω—ñ–≤ –∑ —Ç–µ—Ä–∏—Ç–æ—Ä—ñ—è–º–∏ —Ç–∞ –≤—ñ–π–Ω–∞–º–∏.</p>
                        </div>
                        <div class="plugin-card">
                            <h3>–†–µ–≥—ñ–æ–Ω–∏ üè∞</h3>
                            <p>–ó–∞—Ö–∏—Å—Ç —Ç–µ—Ä–∏—Ç–æ—Ä—ñ–π –∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º –ø—Ä–∞–≤.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-left">
                    <p>–ü—Ä–æ–µ–∫—Ç –∫–µ—Ä—É—î—Ç—å—Å—è StrawSpirit Studio</p>
                    <p>&copy; 2025 SpiriWile. –í—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω—ñ.</p>
                </div>
                <div class="footer-center">
                    <div class="social-links">
                        <a href="https://discord.gg/RhYHdDhh5y" target="_blank">Discord</a>
                        <a href="https://t.me/spiriwile" target="_blank">Telegram</a>
                        <a href="https://www.tiktok.com/@spiriwile" target="_blank">TikTok</a>
                    </div>
                </div>
                <div class="footer-right">
                    <p><span class="copy-ip" onclick="copyToClipboard('spiriwile.duckdns.org')" title="–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å —â–æ–± —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏">IP: spiriwile.duckdns.org</span></p>
                    <p id="server-version">–í–µ—Ä—Å—ñ—è: –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>
                </div>
            </div>
        </div>
    </footer>

    <style>
        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            flex-wrap: wrap;
            gap: 20px;
        }

        .footer-left, .footer-center, .footer-right {
            flex: 1;
            min-width: 250px;
        }

        .footer-left {
            text-align: left;
        }

        .footer-center {
            text-align: center;
        }

        .footer-right {
            text-align: right;
        }

        .footer-left p, .footer-right p {
            margin: 5px 0;
            color: var(--text-secondary);
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .social-links a {
            color: var(--text-primary);
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .social-links a:hover {
            color: var(--accent-color);
        }

        @media (max-width: 768px) {
            .footer-content {
                flex-direction: column;
                text-align: center;
            }

            .footer-left, .footer-center, .footer-right {
                text-align: center;
                width: 100%;
            }
        }

        .copy-ip {
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background-color 0.2s ease;
        }

        .copy-ip:hover {
            background-color: var(--bg-secondary);
        }

        .tooltip {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--accent-color);
            color: white;
            padding: 8px 16px;
            border-radius: 4px;
            animation: fadeInOut 2s ease;
            z-index: 1000;
        }

        @keyframes fadeInOut {
            0% { opacity: 0; transform: translate(-50%, 20px); }
            15% { opacity: 1; transform: translate(-50%, 0); }
            85% { opacity: 1; transform: translate(-50%, 0); }
            100% { opacity: 0; transform: translate(-50%, -20px); }
        }

        .footer-link {
            color: var(--text-primary);
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .footer-link:hover {
            color: var(--accent-color);
        }
    </style>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        window.addEventListener('load', () => {
            document.body.classList.add('loaded');
            setTimeout(() => {
                document.querySelector('.loader-wrapper').classList.add('loader-hidden');
            }, 500);
        });

        // –§—É–Ω–∫—Ü—ñ—è –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –≤ –±—É—Ñ–µ—Ä –æ–±–º—ñ–Ω—É
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                const tooltip = document.createElement('div');
                tooltip.className = 'tooltip';
                tooltip.textContent = '–°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ!';
                document.body.appendChild(tooltip);
                
                setTimeout(() => {
                    tooltip.remove();
                }, 2000);
            });
        }

        // –û—Ç—Ä–∏–º–∞–Ω–Ω—è –≤–µ—Ä—Å—ñ—ó —Å–µ—Ä–≤–µ—Ä–∞
        fetch('https://api.mcsrvstat.us/2/spiriwile.duckdns.org')
            .then(response => response.json())
            .then(data => {
                if (data.version) {
                    document.getElementById('server-version').textContent = `–í–µ—Ä—Å—ñ—è: ${data.version}`;
                }
            })
            .catch(() => {
                document.getElementById('server-version').textContent = '–í–µ—Ä—Å—ñ—è: Java/Bedrock 1.20.4';
            });

        document.addEventListener('DOMContentLoaded', () => {
            const themeToggle = document.getElementById('theme-toggle');
            const debugHolidayBtn = document.getElementById('debug-holiday');
            
            // –ü–æ–∫–∞–∑—É—î–º–æ –¥–µ–±–∞–≥ –∫–Ω–æ–ø–∫—É —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ —î –ø–∞—Ä–∞–º–µ—Ç—Ä pascha=true
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('pascha') === 'true') {
                debugHolidayBtn.classList.remove('d-none');
            }
            
            function addVisibleClass(element) {
                if (element && !element.classList.contains('visible')) {
                    element.classList.add('visible');
                }
            }

            // –ê–∫—Ç–∏–≤–∞—Ü—ñ—è –ø–æ—á–∞—Ç–∫–æ–≤–∏—Ö –∞–Ω—ñ–º–∞—Ü—ñ–π
            setTimeout(() => {
                addVisibleClass(document.querySelector('.navbar'));
                addVisibleClass(document.querySelector('.architecture-section'));
            }, 100);

            // –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—á–∞ –¥–ª—è –∞–Ω—ñ–º–∞—Ü—ñ–π –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—á—É–≤–∞–Ω–Ω—ñ
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            // –Ñ–¥–∏–Ω–∏–π —Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—á –¥–ª—è –≤—Å—ñ—Ö –∞–Ω—ñ–º–∞—Ü—ñ–π
            const mainObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, observerOptions);

            // –°–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—î–º–æ –∑–∞ –æ—Å–Ω–æ–≤–Ω–∏–º–∏ –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏
            document.querySelectorAll('.architecture-item, .section-title').forEach(element => {
                mainObserver.observe(element);
            });

            // –ê–Ω—ñ–º–∞—Ü—ñ—è –¥–ª—è –¥—ñ–∞–≥—Ä–∞–º
            const animateDiagrams = () => {
                const diagrams = document.querySelectorAll('.diagram-item');
                diagrams.forEach((diagram, index) => {
                    diagram.style.opacity = '0';
                    diagram.style.transform = 'translateY(20px)';
                    diagram.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                    diagram.style.transitionDelay = `${index * 0.2}s`;
                    setTimeout(() => {
                        diagram.style.opacity = '1';
                        diagram.style.transform = 'translateY(0)';
                    }, 100 + index * 200);
                });
            };

            // –ê–Ω—ñ–º–∞—Ü—ñ—è –¥–ª—è —Ç–µ—Ö–Ω—ñ—á–Ω–∏—Ö –¥–µ—Ç–∞–ª–µ–π
            const animateDetails = () => {
                const details = document.querySelectorAll('.detail-card');
                details.forEach((detail, index) => {
                    detail.style.opacity = '0';
                    detail.style.transform = 'translateX(-20px)';
                    detail.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                    detail.style.transitionDelay = `${index * 0.2}s`;
                    setTimeout(() => {
                        detail.style.opacity = '1';
                        detail.style.transform = 'translateX(0)';
                    }, 300 + index * 200);
                });
            };

            // –ê–Ω—ñ–º–∞—Ü—ñ—è –¥–ª—è –ø–ª–∞–≥—ñ–Ω—ñ–≤
            const animatePlugins = () => {
                const plugins = document.querySelectorAll('.plugin-card');
                plugins.forEach((plugin, index) => {
                    plugin.style.opacity = '0';
                    plugin.style.transform = 'scale(0.9)';
                    plugin.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                    plugin.style.transitionDelay = `${index * 0.15}s`;
                    setTimeout(() => {
                        plugin.style.opacity = '1';
                        plugin.style.transform = 'scale(1)';
                    }, 500 + index * 150);
                });
            };

            // –ó–∞–ø—É—Å–∫ –∞–Ω—ñ–º–∞—Ü—ñ–π
            setTimeout(() => {
                animateDiagrams();
                animateDetails();
                animatePlugins();
            }, 200);

            // –û–±—Ä–æ–±–Ω–∏–∫ –ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è —Ç–µ–º–∏
            themeToggle.checked = document.documentElement.getAttribute('data-theme') === 'dark';
            themeToggle.addEventListener('change', () => {
                const newTheme = themeToggle.checked ? 'dark' : 'light';
                setTheme(newTheme);
            });

            // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Å–≤—è—Ç–∫–æ–≤–∏—Ö –¥–∞—Ç
            function checkHoliday() {
                const today = new Date();
                const day = today.getDate();
                const month = today.getMonth() + 1;
                const debugMode = sessionStorage.getItem('holiday-debug');

                // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–µ–±–∞–≥ —Ä–µ–∂–∏–º—É
                if (debugMode === 'easter') {
                    document.documentElement.setAttribute('data-theme', 'holiday-easter');
                    addEasterDecorations();
                    return;
                }

                // –í–µ–ª–∏–∫–¥–µ–Ω—å 2024 (5 —Ç—Ä–∞–≤–Ω—è)
                if (month === 5 && day >= 4 && day <= 6) {
                    document.documentElement.setAttribute('data-theme', 'holiday-easter');
                    addEasterDecorations();
                    return;
                }

                // –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ –∑–≤–∏—á–∞–π–Ω–æ—ó —Ç–µ–º–∏
                const savedTheme = getCookie('theme') || getSystemTheme();
                setTheme(savedTheme);
            }

            // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –≤–µ–ª–∏–∫–æ–¥–Ω—ñ—Ö –¥–µ–∫–æ—Ä–∞—Ü—ñ–π
            function addEasterDecorations() {
                const container = document.querySelector('.architecture-section');
                const easterEmojis = ['ü•ö', 'üê∞', 'üê£', 'üå∑', 'üê•'];
                const positions = [
                    { top: '10%', left: '5%' },
                    { top: '20%', right: '10%' },
                    { top: '15%', left: '15%' },
                    { top: '25%', right: '20%' },
                    { top: '30%', left: '25%' }
                ];

                positions.forEach((pos, index) => {
                    const decoration = document.createElement('div');
                    decoration.className = 'easter-egg';
                    decoration.textContent = easterEmojis[index];
                    Object.assign(decoration.style, pos);
                    container.appendChild(decoration);
                });
            }

            // –î–æ–¥–∞—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫ –¥–ª—è –¥–µ–±–∞–≥ –∫–Ω–æ–ø–∫–∏
            let isHolidayMode = false;

            debugHolidayBtn.addEventListener('click', () => {
                isHolidayMode = !isHolidayMode;
                
                if (isHolidayMode) {
                    sessionStorage.setItem('holiday-debug', 'easter');
                    debugHolidayBtn.classList.add('active');
                    checkHoliday();
                } else {
                    sessionStorage.removeItem('holiday-debug');
                    debugHolidayBtn.classList.remove('active');
                    // –í–∏–¥–∞–ª—è—î–º–æ –≤—Å—ñ –≤–µ–ª–∏–∫–æ–¥–Ω—ñ –¥–µ–∫–æ—Ä–∞—Ü—ñ—ó
                    document.querySelectorAll('.easter-egg').forEach(egg => egg.remove());
                    // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –∑–≤–∏—á–∞–π–Ω—É —Ç–µ–º—É
                    const savedTheme = getCookie('theme') || getSystemTheme();
                    setTheme(savedTheme);
                }
            });

            // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —Å–≤—è—Ç–∞ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
            checkHoliday();
        });
    </script>
</body>
</html> 